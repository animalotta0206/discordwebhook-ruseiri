<!DOCTYPE html>
<html>
<head>
    <title>Discord Webhook</title>
    <script>
        function submitForm(event) {
            event.preventDefault(); // フォームのデフォルトの送信動作をキャンセル

            // フォームの値を取得
            var form = document.getElementById("myForm");
            var username = form.username.value;
            var avatarUrl = form.avatar_url.value;
            var message = form.content.value;

            // Discordへのメッセージ送信処理
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "https://discord.com/api/webhooks/1101381206832062586/Q14kLYSSHktMZoRN99dVBUaVEbEbJxjr8W5mojIVEMPMcmra4F1itnVzKilyMKd2axCh");
            xhr.setRequestHeader("Content-Type", "application/json");

            var payload = {
                username: username,
                avatar_url: avatarUrl,
                content: message
            };

            xhr.send(JSON.stringify(payload));

            // 送信完了時の処理
            xhr.onload = function() {
                if (xhr.status === 204) {
                    // メッセージ送信成功時の処理
                    alert("メッセージが送信されました！");
                    form.reset(); // フォームのリセット
                } else {
                    // メッセージ送信失敗時の処理
                    alert("メッセージの送信に失敗しました。もう一度試してください。");
                }
            };
        }
    </script>
</head>
<body>
    <h2>ルセイリ君web hook</h2>
    <p>りくちを絶倫させることができます(？)</p>
    <h3>使い方</h3>
    <p>・メッセージを入力し、送信ボタンを押すだけで送信できます。</p>
    <form id="myForm">
        <p>Discord上での表示名(このフィールドは任意)</p>
        <input type="text" name="username" value="ルセイリくん">
        <p>アバターURL(このフィールドは任意)</p>
        <input type="text" name="avatar_url" value="https://cdn.discordapp.com/attachments/992091661519827074/1123854078892589076/ruseiri.png">
        <p>送信するメッセージ</p>
        <textarea name="content" placeholder="メッセージ内容" cols="40" rows="8" required></textarea>
        <p><input type="submit" value="送信" onclick="submitForm(event)"></p>
    </form>

    <div id="message"></div>
</body>
</html>

